<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="style.css">
  <title>Shuffle Music Player + Pomodoro Timer</title>
  <link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>
  <h1>üéµ Shuffle Music Player</h1>

  <!-- üçÖ Pomodoro Timer -->
  <div id="pomodoro">
    <h2>üçÖ Pomodoro Timer</h2>
    <div id="timerDisplay">25:00</div>
    <div>
      <button class="pomodoro-btn" id="startBtn">Start</button>
      <button class="pomodoro-btn" id="pauseBtn">Pause</button>
      <button class="pomodoro-btn" id="resetBtn">Reset</button>
    </div>
    <p id="modeLabel">Focus Mode</p>
  </div>

  <!-- üéß Music Controls -->
   <div style="margin:10px 0;">
  <label for="playlistSelect">Playlist: </label>
  <select id="playlistSelect">
    <option value="tavern">Fantasy Tavern</option>
    <option value="videoGames">Indie Video Game</option>
    <option value="frenchCafe">Jazzy French Cafe</option>
  </select>
</div>
  <div>
    <button id="prevBtn">‚èÆ Previous</button>
    <button id="nextBtn">‚è≠ Next</button>
  </div>
  <p id="nowPlaying">Now playing: ‚Äî</p>
  <ul id="playlist"></ul>
  <audio id="audioPlayer" controls></audio>

  <script>
    // -----------------------------
    // üçÖ Pomodoro Timer Logic
    // -----------------------------
    const timerDisplay = document.getElementById("timerDisplay");
    const startBtn = document.getElementById("startBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const resetBtn = document.getElementById("resetBtn");
    const modeLabel = document.getElementById("modeLabel");

    let isFocus = true;
    let timeLeft = 25 * 60; // 25 min
    let timer = null;

    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60).toString().padStart(2, "0");
      const seconds = (timeLeft % 60).toString().padStart(2, "0");
      timerDisplay.textContent = `${minutes}:${seconds}`;
    }

    function startTimer() {
      if (timer) return; // prevent multiple intervals
      timer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();

        if (timeLeft <= 0) {
          clearInterval(timer);
          timer = null;

          // Switch mode
          if (isFocus) {
            isFocus = false;
            timeLeft = 5 * 60; // 5 minutes break
            modeLabel.textContent = "Break Time üåø";
          } else {
            isFocus = true;
            timeLeft = 25 * 60; // Back to focus
            modeLabel.textContent = "Focus Mode üî•";
          }

          updateTimerDisplay();
          startTimer(); // auto-start next phase
        }
      }, 1000);
    }

    function pauseTimer() {
      clearInterval(timer);
      timer = null;
    }

    function resetTimer() {
      pauseTimer();
      isFocus = true;
      timeLeft = 25 * 60;
      modeLabel.textContent = "Focus Mode üî•";
      updateTimerDisplay();
    }

    startBtn.addEventListener("click", startTimer);
    pauseBtn.addEventListener("click", pauseTimer);
    resetBtn.addEventListener("click", resetTimer);
    updateTimerDisplay();

    // -----------------------------
    // üéµ Music Player Logic
    // -----------------------------
    const playlists = {
  tavern: [
    "songs/Dirty Paws - Of Monsters And Men.mp3",
    "songs/Come Along - Cosmo Sheldrake.mp3",
    "songs/Hammer And The Anvil - The Longest Johns.mp3",
    "songs/Little Dark Age - MGMT (Bardcore Version).mp3",
    "songs/Pierre - Ryn Weaver.mp3",
    "songs/Soldier, Poet, King - The Oh Hellos.mp3",
    "songs/Song of the Vikings (My Mother Told Me) - Perly I Lotry.mp3",
    "songs/Tardigrade Song - Cosmo Sheldrake.mp3",
    "songs/The Curse - Agnes Obel.mp3",
    "songs/The Moon Will Sing - The Crane Wives.mp3",
    "songs/The Moss - Cosmo Sheldrake.mp3",
    "songs/The Wolf - Phildel.mp3",
    "songs/Toss A Coin To Your Witcher - Joey Batey.mp3",
    "songs/Werewolf - Fiona Apple.mp3",
    "songs/Witches - Alice Phoebe Lou.mp3"
  ],
  videoGames: [
    "vgSongs/Hollow Knight OST - Enter Hallownest.mp3",
    "songs/break2.mp3"
  ],
  frenchCafe: [
    "fcSongs/Pink Martini - Sympathique [HD].mp3",
    "songs/tavern2.mp3"
  ]
};

let currentPlaylistName = "tavern";
let songs = playlists[currentPlaylistName];

    const playlistElement = document.getElementById("playlist");
    const audioPlayer = document.getElementById("audioPlayer");
    const nowPlaying = document.getElementById("nowPlaying");
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");

    let shuffled = [];
    let currentIndex = 0;

    function shuffleArray(array) {
      let shuffled = array.slice();
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function renderPlaylist() {
      playlistElement.innerHTML = "";
      shuffled.forEach((song, index) => {
        const li = document.createElement("li");
        li.textContent = song.split("/").pop();
        li.addEventListener("click", () => playTrack(index));
        if (index === currentIndex) li.classList.add("playing");
        playlistElement.appendChild(li);
      });
    }

    function playTrack(index) {
      currentIndex = index;
      const song = shuffled[currentIndex];
      audioPlayer.src = song;
      audioPlayer.play();

      nowPlaying.textContent = "Now playing: " + song.split("/").pop();
      document.querySelectorAll("li").forEach(li => li.classList.remove("playing"));
      document.querySelectorAll("li")[currentIndex].classList.add("playing");
    }

    function nextTrack() {
      currentIndex++;
      if (currentIndex >= shuffled.length) {
        shuffled = shuffleArray(songs);
        currentIndex = 0;
      }
      playTrack(currentIndex);
    }

    function prevTrack() {
      currentIndex--;
      if (currentIndex < 0) currentIndex = shuffled.length - 1;
      playTrack(currentIndex);
    }

    audioPlayer.addEventListener("ended", nextTrack);
    nextBtn.addEventListener("click", nextTrack);
    prevBtn.addEventListener("click", prevTrack);

    shuffled = shuffleArray(songs);
    renderPlaylist();
    // Change playlist when user selects a new one
const playlistSelect = document.getElementById("playlistSelect");
playlistSelect.addEventListener("change", (e) => {
  currentPlaylistName = e.target.value;
  songs = playlists[currentPlaylistName];
  shuffled = shuffleArray(songs);
  currentIndex = 0;
  renderPlaylist();
  playTrack(0);
});
    playTrack(0);
  </script>
</body>
</html>
