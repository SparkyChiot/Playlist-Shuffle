<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="style.css">
  <title>Sparky's Playlist Shuffle</title>

</head>
<body>
  <h1>üéµ Shuffle Music Player</h1>
  <!-- üéß Music Controls -->
   <div style="margin:10px 0;">
  <label for="playlistSelect">Playlist: </label>
  <select id="playlistSelect">
    <option value="tavern">Fantasy Tavern</option>
    <option value="videoGames">Indie Video Game</option>
    <option value="frenchCafe">Jazzy French Cafe</option>
  </select>
</div>
  <div>
    <button id="prevBtn">‚èÆ Previous</button>
    <button id="nextBtn">‚è≠ Next</button>
  </div>
  <p id="nowPlaying">Now playing: ‚Äî</p>
  <ul id="playlist"></ul>
  <audio id="audioPlayer" controls></audio>

  <script>
   
    // -----------------------------
    // üéµ Music Player Logic
    // -----------------------------
    const playlists = {
  tavern: [
    "songs/Dirty Paws - Of Monsters And Men.mp3",
    "songs/Come Along - Cosmo Sheldrake.mp3",
    "songs/Hammer And The Anvil - The Longest Johns.mp3",
    "songs/Little Dark Age - MGMT (Bardcore Version).mp3",
    "songs/Pierre - Ryn Weaver.mp3",
    "songs/Soldier, Poet, King - The Oh Hellos.mp3",
    "songs/Song of the Vikings (My Mother Told Me) - Perly I Lotry.mp3",
    "songs/Tardigrade Song - Cosmo Sheldrake.mp3",
    "songs/The Curse - Agnes Obel.mp3",
    "songs/The Moon Will Sing - The Crane Wives.mp3",
    "songs/The Moss - Cosmo Sheldrake.mp3",
    "songs/The Wolf - Phildel.mp3",
    "songs/Toss A Coin To Your Witcher - Joey Batey.mp3",
    "songs/Werewolf - Fiona Apple.mp3",
    "songs/Witches - Alice Phoebe Lou.mp3"
  ],
  videoGames: [
    "vgSongs/Hollow Knight OST - Enter Hallownest.mp3",
    "songs/break2.mp3"
  ],
  frenchCafe: [
    "fcSongs/Pink Martini - Sympathique [HD].mp3",
    "songs/tavern2.mp3"
  ]
};

let currentPlaylistName = "tavern";
let songs = playlists[currentPlaylistName];

    const playlistElement = document.getElementById("playlist");
    const audioPlayer = document.getElementById("audioPlayer");
    const nowPlaying = document.getElementById("nowPlaying");
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");

    let shuffled = [];
    let currentIndex = 0;

    function shuffleArray(array) {
      let shuffled = array.slice();
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function renderPlaylist() {
      playlistElement.innerHTML = "";
      shuffled.forEach((song, index) => {
        const li = document.createElement("li");
        li.textContent = song.split("/").pop();
        li.addEventListener("click", () => playTrack(index));
        if (index === currentIndex) li.classList.add("playing");
        playlistElement.appendChild(li);
      });
    }

    function playTrack(index) {
      currentIndex = index;
      const song = shuffled[currentIndex];
      audioPlayer.src = song;
      audioPlayer.play();

      nowPlaying.textContent = "Now playing: " + song.split("/").pop();
      document.querySelectorAll("li").forEach(li => li.classList.remove("playing"));
      document.querySelectorAll("li")[currentIndex].classList.add("playing");
    }

    function nextTrack() {
      currentIndex++;
      if (currentIndex >= shuffled.length) {
        shuffled = shuffleArray(songs);
        currentIndex = 0;
      }
      playTrack(currentIndex);
    }

    function prevTrack() {
      currentIndex--;
      if (currentIndex < 0) currentIndex = shuffled.length - 1;
      playTrack(currentIndex);
    }

    audioPlayer.addEventListener("ended", nextTrack);
    nextBtn.addEventListener("click", nextTrack);
    prevBtn.addEventListener("click", prevTrack);

    shuffled = shuffleArray(songs);
    renderPlaylist();
    // Change playlist when user selects a new one
const playlistSelect = document.getElementById("playlistSelect");
playlistSelect.addEventListener("change", (e) => {
  currentPlaylistName = e.target.value;
  songs = playlists[currentPlaylistName];
  shuffled = shuffleArray(songs);
  currentIndex = 0;
  renderPlaylist();
  playTrack(0);
});
    playTrack(0);
  </script>
</body>
</html>
